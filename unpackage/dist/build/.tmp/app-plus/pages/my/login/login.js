(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/login/login"],{"4a49":function(t,n,o){"use strict";o.r(n);var e=o("ddd9"),i=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(n,t,function(){return e[t]})}(a);n["default"]=i.a},6724:function(t,n,o){},"74b2":function(t,n,o){"use strict";o.r(n);var e=o("ec40"),i=o("4a49");for(var a in i)"default"!==a&&function(t){o.d(n,t,function(){return i[t]})}(a);o("8553");var r=o("2877"),s=Object(r["a"])(i["default"],e["a"],e["b"],!1,null,null,null);n["default"]=s.exports},8553:function(t,n,o){"use strict";var e=o("6724"),i=o.n(e);i.a},ddd9:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=o("2f62"),i=r(o("f4bb")),a=r(o("92e5"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{},e=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(n){c(t,n,o[n])})}return t}function c(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var u=function(){return o.e("components/m-input").then(o.bind(null,"5148"))},d={components:{mInput:u},computed:(0,e.mapState)(["hasLogin","userInfo","token"]),data:function(){return{loading:!1,providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,msg:""}},methods:s({initPosition:function(){this.positionTop=t.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(11!=this.account.length)return this.loading=!1,void t.showToast({icon:"none",title:"请检查手机号是否正确"});if(!/^1(3|4|5|7|8)\d{9}$/.test(this.account))return this.loading=!1,void t.showToast({icon:"none",title:"手机号只能为11位数字"});if(this.password.length<8)return this.loading=!1,void t.showToast({icon:"none",title:"密码最短为 8 个字符"});if(!n.test(this.password))return this.loading=!1,void t.showToast({icon:"none",title:"密码必须为字母和数字的组合"});var o={phone:this.account,password:this.password},e=a.default.urls.login,r={phone:o.phone,password:o.password};a.default.req.get(e,r,function(n){if(0!==n.code)return-200===n.code?void t.showModal({content:"无效手机号！",showCancel:!1}):-6===n.code?void t.showModal({content:"密码错误！",showCancel:!1}):-2===n.code?void t.showModal({content:"用户不存在！",showCancel:!1}):-100===n.code?void t.showModal({content:"手机号和密码不能为空！",showCancel:!1}):void t.showModal({content:"未知错误！",showCancel:!1});i.default.commit("login",n.data),t.showToast({icon:"none",title:"登陆成功"});var o=a.default.urls.getSelfUserInfo,e={};a.default.req.get(o,e,function(n){if(0===n.code){var o=a.default.urls.getHead,e={};a.default.req.get(o,e,function(t){if(0===t.code){var o=n.data;o.headUrl="http://"+t.data,delete o.password,i.default.commit("saveUserInfo",o)}else{var e=n.data;e.headUrl="/static/icons/logo.png",delete e.password,i.default.commit("saveUserInfo",e)}})}else t.showModal({content:"获取用户信息失败！",showCancel:!1})}),t.navigateBack()})},toMain:function(n){this.login(n),this.forcedLogin?t.reLaunch({url:"../my"}):t.navigateBack()}},(0,e.mapMutations)(["login"])),onReady:function(){this.initPosition()}};n.default=d}).call(this,o("6e42")["default"])},ec40:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement;t._self._c},i=[];o.d(n,"a",function(){return e}),o.d(n,"b",function(){return i})}},[["671d","common/runtime","common/vendor"]]]);