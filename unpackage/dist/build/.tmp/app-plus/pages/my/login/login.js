(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/login/login"],{"0732":function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return i})},"4a49":function(t,n,e){"use strict";e.r(n);var o=e("ddd9"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);n["default"]=i.a},6724:function(t,n,e){},"74b2":function(t,n,e){"use strict";e.r(n);var o=e("0732"),i=e("4a49");for(var a in i)"default"!==a&&function(t){e.d(n,t,function(){return i[t]})}(a);e("8553");var r=e("2877"),s=Object(r["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports},8553:function(t,n,e){"use strict";var o=e("6724"),i=e.n(o);i.a},ddd9:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("2f62"),i=r(e("f4bb")),a=r(e("92e5"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){u(t,n,e[n])})}return t}function u(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var c=function(){return e.e("components/m-input").then(e.bind(null,"5148"))},l={components:{mInput:c},computed:(0,o.mapState)(["hasLogin","userInfo","token"]),data:function(){return{loading:!1,providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,msg:""}},methods:s({initPosition:function(){this.positionTop=t.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(11!=this.account.length)return this.loading=!1,void t.showToast({icon:"none",title:"请检查手机号是否正确"});if(!/^1(3|4|5|7|8)\d{9}$/.test(this.account))return this.loading=!1,void t.showToast({icon:"none",title:"手机号只能为11位数字"});if(this.password.length<8)return this.loading=!1,void t.showToast({icon:"none",title:"密码最短为 8 个字符"});if(!n.test(this.password))return this.loading=!1,void t.showToast({icon:"none",title:"密码必须为字母和数字的组合"});var e={phone:this.account,password:this.password},o=a.default.urls.login,r={phone:e.phone,password:e.password};a.default.req.get(o,r,function(n){if(0===n.code){i.default.commit("login",n.data),t.showToast({icon:"none",title:"登陆成功"});var e=a.default.urls.getSelfUserInfo,o={};a.default.req.get(e,o,function(n){if(0===n.code){var e=a.default.urls.getHead,o={};a.default.req.get(e,o,function(t){if(0===t.code){var e=n.data;e.headUrl="http://"+t.data,delete e.password,i.default.commit("saveUserInfo",e)}else{var o=n.data;o.headUrl="/static/icons/logo.png",delete o.password,i.default.commit("saveUserInfo",o)}})}else t.showModal({content:"获取用户信息失败！",showCancel:!1})}),t.navigateBack()}else t.showModal({content:"用户名或者密码错误！",showCancel:!1})})},toMain:function(n){this.login(n),this.forcedLogin?t.reLaunch({url:"../my"}):t.navigateBack()}},(0,o.mapMutations)(["login"])),onReady:function(){this.initPosition()}};n.default=l}).call(this,e("6e42")["default"])}},[["671d","common/runtime","common/vendor"]]]);