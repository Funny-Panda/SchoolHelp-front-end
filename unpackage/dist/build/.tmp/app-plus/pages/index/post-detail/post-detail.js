(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/post-detail/post-detail"],{"59ec":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("ed8e"),s={data:function(){return{showAddComment:!1,commentEnter:"",postDetail:{},post:{}}},methods:{showAddCommentBox:function(){this.showAddComment=!0},hideAddCommentBox:function(){this.showAddComment=!1},addComment:function(){var t=this,e=this.$api.urls.addComment,o={postId:this.post.id,commentContent:this.commentEnter};console.log(o," at pages\\index\\post-detail\\post-detail.vue:96"),this.$api.req.post(e,o,function(e){console.log(e," at pages\\index\\post-detail\\post-detail.vue:98"),t.updateComments(),t.hideAddCommentBox()})},updateComments:function(){var t=this,e=this.$api.urls.getAllComments+this.post.id,o={};this.$api.req.get(e,o,function(e){console.log(e," at pages\\index\\post-detail\\post-detail.vue:107");var o=t.post.helpUserId,s=[];e.data&&(s=e.data.map(function(t){return{id:t.commentId,user:{id:t.userId,headImg:"http://"+t.headImageUrl,isCertified:!0,name:t.commentUserName},publishTime:(0,n.friendlyDate)(new Date(t.commentTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime()),content:t.commentContent,helpOk:t.userId==o}}),t.post.comments=s)})},approvalPost:function(){var e=this,o=this.$api.urls.approvalPost,n={postId:this.post.id};this.$api.req.post(o,n,function(o){console.log(o," at pages\\index\\post-detail\\post-detail.vue:133"),0==o.code?(t.showToast({icon:"none",title:o.data}),"点赞成功"==o.data?e.post.approvalNum++:"取消点赞"==o.data&&e.post.approvalNum--):t.showToast({icon:"none",title:o.msg})})},reportPost:function(){var e=this,o=this.$api.urls.reportPost,n={postId:this.post.id,reportDes:"nonenonenonenonenonenonenone"};this.$api.req.post(o,n,function(o){0==o.code?(t.showToast({icon:"none",title:"举报成功"}),e.post.reportNum++):t.showToast({icon:"none",title:o.msg})})},collectPost:function(){var e=this,o=this.$api.urls.collectPost,n={postId:this.post.id};this.$api.req.post(o,n,function(o){0==o.code?(t.showToast({icon:"none",title:"收藏成功"}),e.post.collectNum++):t.showToast({icon:"none",title:o.msg})})}},onLoad:function(t){var e=this;for(var o in this.postDetail=JSON.parse(t.query),this.postDetail)console.log(o,"---",this.postDetail[o]," at pages\\index\\post-detail\\post-detail.vue:196");var s=this.$api.urls.getPostDetail+this.postDetail.postId,i={};this.$api.req.get(s,i,function(t){console.log(t," at pages\\index\\post-detail\\post-detail.vue:201");var o=t.data.post.helpUserId,s=[];t.data.comments&&(s=t.data.comments.map(function(t){return{id:t.commentId,user:{id:t.userId,headImg:"http://"+t.headImageUrl,isCertified:!0,name:t.commentUserName},publishTime:(0,n.friendlyDate)(new Date(t.commentTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime()),content:t.commentContent,helpOk:t.userId==o}}));var i=t.data.post;e.post={id:i.postId,user:{id:i.userId,headImg:"http://"+i.headImageUrl,isCertified:!0,name:i.userName},title:i.title,content:i.content,publishTime:(0,n.friendlyDate)(new Date(i.issueTime.replace(/\-/g,"/").replace(/\T/g," ").substring(0,19)).getTime()),points:i.points,comments:s,viewNum:i.viewNum,approvalNum:i.approvalNum,commentNum:i.commentNum,reportNum:i.reportNum,helpUserId:i.helpUserId,helpOk:-1!=i.helpUserId}})}};e.default=s}).call(this,o("6e42")["default"])},"5cb9":function(t,e,o){"use strict";o.r(e);var n=o("a4db"),s=o("b9e3");for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);o("949c");var a=o("2877"),r=Object(a["a"])(s["default"],n["a"],n["b"],!1,null,"51aa124a",null);e["default"]=r.exports},"949c":function(t,e,o){"use strict";var n=o("e76c"),s=o.n(n);s.a},a4db:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return s})},b9e3:function(t,e,o){"use strict";o.r(e);var n=o("59ec"),s=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=s.a},e76c:function(t,e,o){}},[["d733","common/runtime","common/vendor"]]]);