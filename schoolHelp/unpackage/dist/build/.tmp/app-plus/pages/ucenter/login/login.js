(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/login/login"],{"0e7d":function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=o("2f62");function a(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{},e=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(n){i(t,n,o[n])})}return t}function i(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var c=function(){return o.e("components/m-input").then(o.bind(null,"48b0"))},s={components:{mInput:c},data:function(){return{loading:!1,providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,msg:""}},computed:(0,e.mapState)(["forcedLogin"]),methods:a({initPosition:function(){this.positionTop=t.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=this,o=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(11!=this.account.length)return this.loading=!1,void t.showToast({icon:"none",title:"请检查手机号是否正确"});if(!/^1(3|4|5|7|8)\d{9}$/.test(this.account))return this.loading=!1,void t.showToast({icon:"none",title:"手机号只能为11位数字"});if(this.password.length<8)return this.loading=!1,void t.showToast({icon:"none",title:"密码最短为 8 个字符"});if(!o.test(this.password))return this.loading=!1,void t.showToast({icon:"none",title:"密码必须为字母和数字的组合"});var e={account:this.account,password:this.password};t.request({url:"http://134.175.16.143:8080/schoolhelp/login",method:"GET",data:{phone:e.account,password:e.password},success:function(o){0===o.data.code?(t.showToast({icon:"none",title:"登陆成功"}),t.request({url:"http://134.175.16.143:8080/schoolhelp/user",method:"GET",header:{token:o.data.data},success:function(e){if(0===e.data.code){var a=function(t,n,o,e,a){this.name=t,this.token=n,this.fallow=o,this.collect=e,this.points=a},i=new a(e.data.data.name,o.data.data,e.data.data.fallowNum,e.data.data.collectPostNum,e.data.data.points);n.login(i),t.navigateBack()}},fail:function(){t.showModal({content:"获取用户信息失败！",showCancel:!1})}})):t.showModal({content:"用户名密码错误！",showCancel:!1})},fail:function(n){t.showModal({content:"请求失败，请重试！",showCancel:!1})}})},toMain:function(n){this.login(n),this.forcedLogin?t.reLaunch({url:"../ucenter"}):t.navigateBack()}},(0,e.mapMutations)(["login"])),onReady:function(){this.initPosition()}};n.default=s}).call(this,o("6e42")["default"])},"9c45":function(t,n,o){"use strict";var e=o("eaef"),a=o.n(e);a.a},a892:function(t,n,o){"use strict";o.r(n);var e=o("d8ee"),a=o("e8f4");for(var i in a)"default"!==i&&function(t){o.d(n,t,function(){return a[t]})}(i);o("9c45");var c=o("2877"),s=Object(c["a"])(a["default"],e["a"],e["b"],!1,null,null,null);n["default"]=s.exports},d8ee:function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement;t._self._c},a=[];o.d(n,"a",function(){return e}),o.d(n,"b",function(){return a})},e8f4:function(t,n,o){"use strict";o.r(n);var e=o("0e7d"),a=o.n(e);for(var i in e)"default"!==i&&function(t){o.d(n,t,function(){return e[t]})}(i);n["default"]=a.a},eaef:function(t,n,o){}},[["3888","common/runtime","common/vendor"]]]);